<!DOCTYPE html>

<html>
	<head>
		<meta charset="gb2312" />
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		
		<!-- <script src="js/jquery-3.5.1.min.js"></script> -->
		<link rel="stylesheet" href="css/mui.min.css">
		<style type="text/css">
			body,html{
				height: 100%;
			}
			.mui-card{
				
				
			}
			.btn{
				pointer-events: all;
				animation: :btnAnim 2s step-end forwards;
			}
			.btn:active{
				animation: none;
			}
			@keyframes btnAnim{
				from{
					pointer-events: none;
				}
				to{
					pointer-events: all;
				}
			}
			#cover{
				display: none;
				position: absolute;
				height: 100%;
				width: 100%;
				background-color: gray;
				z-index: 999;
				opacity:0.4;
			}
		</style>
		<title>中医体质辨识</title>
	</head>
	<body>
		<header class="mui-bar mui-bar-nav" style="height: 45px;">
			<!-- <a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a> -->
			<h1 class="mui-title" style="color: #007aff;font-size: 16pt;font-weight: bold;">中医辨证论治</h1>
		</header>
		<!-- 遮罩层 -->
		<div id="cover">
			
		</div>
		<div class="mui-card" style="height: 90%;margin: 0;top: 45px;;z-index: 1;">
			<div class="mui-card-header mui-card-media" style="padding-left: 0;margin-left: 0;height: 15%;">
				<div id="title"  class="mui-media-body" style="padding-left: 0;margin-left: 15px;font-weight:bold;font-size: 15pt;color: #007aff;padding-top: 10px;">
					题目一
					<p style="color: #4d4d4d;font-size: 12pt;padding-top: 10px;">&nbsp;&nbsp;&nbsp;&nbsp;您精力充沛吗？（指精神头足，乐于做事）</p>
				</div>
				<!--<img class="mui-pull-left" src="../images/logo.png" width="34px" height="34px" />
				<h2>小M</h2>
				<p>发表于 2016-06-30 15:30</p>-->
			</div>
			<div class="mui-card-content" style="height: 80%;">
				<!-- <img src="../images/yuantiao.jpg" alt="" width="100%"/> -->
				<!-- <h5 class="mui-content-padded">图标右对齐</h5> -->
				<div class="mui-card" style="height: 90%;margin-top: 5%;">
					<form class="mui-input-group" style="height: 80%;font-size: 13pt;font-weight: 800;color: #414141;">
						<div class="mui-input-row mui-radio" onclick="checkBocControl(1);" style="height: 20%;">
							<label style="inline-height:100%">没有(根本不/从来没有)</label>
							<input id="xuanxiang1" value="1" name="radio1" type="radio" >
						</div>
						<div class="mui-input-row mui-radio" onclick="checkBocControl(2);" style="height: 20%;">
							<label>很.少(有一点/偶尔)</label>
							<input id="xuanxiang2" value="2"  name="radio2" type="radio" >
						</div>
						<div class="mui-input-row mui-radio" onclick="checkBocControl(3);" style="height: 20%;">
							<label>有时(有些/少数时间)</label>
							<input id="xuanxiang3" value="3"  name="radio3" type="radio" >
						</div>
						<div class="mui-input-row mui-radio" onclick="checkBocControl(4);" style="height: 20%;">
							<label>经常(相当/多数时间)</label>
							<input id="xuanxiang4" value="4" name="radio4" type="radio" >
						</div>
						<div class="mui-input-row mui-radio" onclick="checkBocControl(5);" style="height: 20%;">
							<label>总是(非常/每天)</label>
							<input id="xuanxiang5" value="5"  name="radio5" type="radio">
						</div>
					</form>
				</div>
			</div>
			
		</div>
		<div id="result" class="mui-card" style="height: 90%;width:100%;margin: 0;top: 45px;z-index: 999;position: absolute;display: none;">
			<div class="mui-card-header mui-card-media" style="padding-left: 0;margin-left: 0;height: 22%;">
				<div id="title"  class="mui-media-body" style="padding-left: 0;margin-left: 15px;font-weight:bold;font-size: 15pt;color: #007aff;padding-top: 10px;">
					测试结果
					<p id="result_title" style="color: #4d4d4d;font-size: 12pt;padding-top: 10px;">&nbsp;&nbsp;&nbsp;&nbsp;您的各项得分为：</p>
				</div>
				
				
			</div>
			<div id="result_img" class="mui-card-content" style="height: 73%;overflow: scroll;">
				<!-- <img src="../中医体质辨识/img/平和质.png" alt="" width="100%"/>
				<img src="../中医体质辨识/img/平和质.png" alt="" width="100%"/> -->
				
				<!-- <h5 class="mui-content-padded">图标右对齐</h5> -->
				
			
			</div>
		</div>
		<div class="mui-card-footer" style="height: 8%;bottom: 0;position: absolute;width: 100%;background-color: whitesmoke;font-weight:bold;box-shadow: 0 0 5px 0;z-index: 9998;font-size: 14pt;">
			<a onclick="$('#cover').show();turnPage(0);" class="mui-card-link btn">上一题</a>
			<a onclick="submit();" class="mui-card-link btn">确&nbsp;&nbsp;&nbsp;&nbsp;定</a>
			<a id="next" onclick="$('#cover').show();turnPage(1);" class="mui-card-link btn">下一题</a>
		</div>
		<div id="reflash" class="mui-card-footer" style="height: 8%;bottom: 0;position: absolute;width: 100%;background-color: whitesmoke;font-weight:bold;box-shadow: 0 0 5px 0;z-index: 9999;text-align: center;font-size: 16pt;display: none;">
			<a onclick="location.reload();" class="mui-card-link btn" style="text-align: center;margin: auto;">重新测评</a>	
		</div>
		<!-- <div id="change">
			<button id="change_btn" type="button" class="mui-btn mui-btn-blue mui-btn-block" style="border-radius: 0;height: 50px;padding: 0;length:100%"></button>
		</div> -->
		<script src="./js/quetion.js"></script>
		<script src="./js/jquery_1.9.1.js"></script>
		<script src="./js/mui.js"></script>
		<script type="text/javascript">
		
			//全局变量
			
			//当前题号
			var item_no=0;	//	当前题号
			var item_re_no=0;	//	之前题号
			var no_double=0;//阻止双击
			
			//体质相关题号
			var tizhi_1=[2,3,4,14];//气虚质
			var tizhi_2=[11,12,13,29];//阳虚质
			var tizhi_3=[10,21,26,31];//阴虚质
			var tizhi_4=[9,16,28,32];//痰湿质
			var tizhi_5=[23,25,27,30];//湿热质
			var tizhi_6=[19,22,24,33];//血瘀质
			var tizhi_7=[5,6,7,8];//气郁质
			var tizhi_8=[15,17,18,20];//特禀质
			var tizhi_9=[1,2,4,5,13];//平和质（该项2,4,5,13反向记分）
			
			//记分-原始分
			var numArr=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];//33题
			//测试数据
			//var numArr=[1,4,4,1,1,1,1,1,1,5,1,1,1,1,1,1,1,1,1,1,1,1,4,1,1,1,1,1,1,1,1,1,1];
			
			var numArr_sum=0;
			//转化分数
			var tizhi_num_1=0;//气虚质
			var tizhi_num_2=0;//阳虚质
			var tizhi_num_3=0;//阴虚质
			var tizhi_num_4=0;//痰湿质
			var tizhi_num_5=0;//湿热质
			var tizhi_num_6=0;//血瘀质
			var tizhi_num_7=0;//气郁质
			var tizhi_num_8=0;//特禀质
			var tizhi_num_9=0;//平和质（该项2,4,5,13反向记分）
			
			//alert(item_1[0]);
			
		
			//题目
			//alert(question);
			
			//初始数据设置
			var list_num1=[5, 20, 36, 10, 10, 20];
			var list_num2=[5, 20, 36, 10, 10, 20];
			var list_num3=[5, 20, 36, 10, 10, 20];
			var list_num4=[5, 20, 36, 10, 10, 20];
			var list_num5=[5, 20, 36, 10, 10, 20];
			
			
			
			$(function(){		//预加载
				mui.init({
					swipeBack: true //启用右滑关闭功能
				});
				// for(var i=1;i<=5;i++){	
				// 	$("#xuanxiang"+i).prop("checked",false);
				// }
			});
			
			setInterval(function(){
				if(item_no!=item_re_no){
					console.log("值变成了：",item_no);
					item_re_no=item_no;
				}
			},1000);
			  
			
			function turnPage(t){	//	换题
				if(item_no==32){
					mui.toast("已经是最后一题，请点击确认提交！");
					$("#cover").hide();
				}else{
					if(numArr[item_no]==0){
						$("#cover").hide ();
						mui.toast('请选择当前题目选项再进行下一题！');
					}else{
						setTimeout(function(){
							if(t==0&&item_no>0){
								item_no-=1;
							}else if(t==0&&item_no==0){ 
								alert("已是第一题！");
							}else if(t==1){//数据验证完成,翻页
								item_no+=1;
							}
							
							//显示题目
							changeItem();
							for(var i=1;i<=5;i++){
								$("#xuanxiang"+i).prop("checked",false);
							}
							
							$("#cover").hide();
						},0);
						
					}
				}
				
		
					
				
			}
			
			function changeItem(){	//显示题目
				var content="题目"+qus_no[item_no]+"<p style=\"color: #4d4d4d;font-size: 12pt;padding-top: 10px;\">&nbsp;&nbsp;&nbsp;&nbsp;"+question[item_no]+"</p>";
				$("#title").html(content);
			}
			
			
			
			function checkBocControl(no){//单选控制
				$("#xuanxiang"+no).prop("checked",true);
				for(var i=1;i<=5;i++){
					if(i!=no){
						$("#xuanxiang"+i).prop("checked",false);
					}
					
				}
				//输入当前选项
				
				
				numArr[item_no]=no;
				
				
			}
			
			
			function submit(){	//提交结果
				//检测完整度	
				var flag1=0;	//	未答题题号
				for(var i=0;i<33;i++){
					if(numArr[i]==0){
						flag1=i+1;
						break;
					}
				} 
				
				if(flag1>=1){
					alert("您还未回答第"+flag1+"题");
				}else{//开始计算原始分和转化分
					//原始分
					for(var i=0;i<numArr.length;i++){
						numArr_sum+=numArr[i];
					}
					//各体质分
					tizhi_num_1=numArr[tizhi_1[0]-1]+numArr[tizhi_1[1]-1]+numArr[tizhi_1[2]-1]+numArr[tizhi_1[3]-1];
					tizhi_num_2=numArr[tizhi_2[0]-1]+numArr[tizhi_2[1]-1]+numArr[tizhi_2[2]-1]+numArr[tizhi_2[3]-1];
					tizhi_num_3=numArr[tizhi_3[0]-1]+numArr[tizhi_3[1]-1]+numArr[tizhi_3[2]-1]+numArr[tizhi_3[3]-1];
					tizhi_num_4=numArr[tizhi_4[0]-1]+numArr[tizhi_4[1]-1]+numArr[tizhi_4[2]-1]+numArr[tizhi_4[3]-1];
					tizhi_num_5=numArr[tizhi_5[0]-1]+numArr[tizhi_5[1]-1]+numArr[tizhi_5[2]-1]+numArr[tizhi_5[3]-1];
					tizhi_num_6=numArr[tizhi_6[0]-1]+numArr[tizhi_6[1]-1]+numArr[tizhi_6[2]-1]+numArr[tizhi_6[3]-1];
					tizhi_num_7=numArr[tizhi_7[0]-1]+numArr[tizhi_7[1]-1]+numArr[tizhi_7[2]-1]+numArr[tizhi_7[3]-1];
					tizhi_num_8=numArr[tizhi_8[0]-1]+numArr[tizhi_8[1]-1]+numArr[tizhi_8[2]-1]+numArr[tizhi_8[3]-1];
					//平和质特殊计算
					var pinghe_1=numArr[tizhi_9[0]-1];
					var pinghe_2=numArr[tizhi_9[1]-1];
					if(pinghe_2==1){
						pinghe_2=5;
					}else if(pinghe_2==2){
						pinghe_2=4;
					}else if(pinghe_2==4){
						pinghe_2=2;
					}else if(pinghe_2==5){
						pinghe_2=1;
					}
					var pinghe_3=numArr[tizhi_9[2]-1];
					if(pinghe_3==1){
						pinghe_3=5;
					}else if(pinghe_3==2){
						pinghe_3=4;
					}else if(pinghe_3==4){
						pinghe_3=2;
					}else if(pinghe_3==5){
						pinghe_3=1;
					}
					var pinghe_4=numArr[tizhi_9[3]-1];
					if(pinghe_4==1){
						pinghe_4=5;
					}else if(pinghe_4==2){
						pinghe_4=4;
					}else if(pinghe_4==4){
						pinghe_4=2;
					}else if(pinghe_4==5){
						pinghe_4=1;
					}
					var pinghe_5=numArr[tizhi_9[4]-1];
					if(pinghe_5==1){
						pinghe_5=5;
					}else if(pinghe_5==2){
						pinghe_5=4;
					}else if(pinghe_5==4){
						pinghe_5=2;
					}else if(pinghe_5==5){
						pinghe_5=1;
					}
					
					console.log(pinghe_1,pinghe_2,pinghe_3,pinghe_4,pinghe_5);
					tizhi_num_9=pinghe_1+pinghe_2+pinghe_3+pinghe_4+pinghe_5;
					
					console.log(numArr);
					console.log(numArr_sum);
					console.log(tizhi_num_1+"-----"+tizhi_num_2+"-----"+tizhi_num_3+"-----"+tizhi_num_4+"-----"+tizhi_num_5+"-----"+tizhi_num_6+"-----"+tizhi_num_7+"-----"+tizhi_num_8+"-----"+tizhi_num_9);
					
					//输出结果
					var result_con="";	//结果
					var img_con="";		//图片结果
					// var tizhi_num_1=0;//气虚质
					// var tizhi_num_2=0;//阳虚质
					// var tizhi_num_3=0;//阴虚质
					// var tizhi_num_4=0;//痰湿质
					// var tizhi_num_5=0;//湿热质
					// var tizhi_num_6=0;//血瘀质
					// var tizhi_num_7=0;//气郁质
					// var tizhi_num_8=0;//特禀质
					result_con+="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;您的各项得分为：平和质:"+tizhi_num_9+"分；气虚质:"+tizhi_num_1+"分；阳虚质:"+tizhi_num_2+"分；阴虚质:"+tizhi_num_3+"分；痰湿质:"+tizhi_num_4+"分；湿热质:"+tizhi_num_5+"分；血瘀质:"+tizhi_num_6+"分；气郁质:"+tizhi_num_7+"分；特禀质:"+tizhi_num_8+"分。";
					if(tizhi_num_9>=17&&tizhi_num_1<=8&&tizhi_num_2<=8&&tizhi_num_3<=8&&tizhi_num_4<=8&&tizhi_num_5<=8&&tizhi_num_6<=8&&tizhi_num_7<=8&&tizhi_num_8<=8){
						result_con+="\r&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;您的体质是平和质。";
						img_con="<img src=\"../中医体质辨识/img/平和质.png\" alt=\"\" width=\"100%\"/>";
						$("#result_img").html(img_con);
						
					}else if(tizhi_num_9>=17&&tizhi_num_1<=10&&tizhi_num_2<=10&&tizhi_num_3<=10&&tizhi_num_4<=10&&tizhi_num_5<=10&&tizhi_num_6<=10&&tizhi_num_7<=10&&tizhi_num_8<=10){
						var jibenshi_num=0;
						result_con+="\r&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;您的体质基本是平和质";
						img_con="<img src=\"../中医体质辨识/img/平和质.png\" alt=\"\" width=\"100%\"/>";
						if(tizhi_num_1>=9){jibenshi_num+=1;result_con+=",倾向是气虚质";img_con+="<img src=\"../中医体质辨识/img/气虚质.png\" alt=\"\" width=\"100%\"/>";}
						if(tizhi_num_2>=9){jibenshi_num+=1;if(jibenshi_num>0){result_con+=",阳虚质";}else{result_con+=",倾向是阳虚质"};img_con+="<img src=\"../中医体质辨识/img/阳虚质.png\" alt=\"\" width=\"100%\"/>";}
						if(tizhi_num_3>=9){jibenshi_num+=1;if(jibenshi_num>0){result_con+=",阴虚质";}else{result_con+=",倾向是阴虚质"};img_con+="<img src=\"../中医体质辨识/img/阴虚质.png\" alt=\"\" width=\"100%\"/>";}
						if(tizhi_num_4>=9){jibenshi_num+=1;if(jibenshi_num>0){result_con+=",痰湿质";}else{result_con+=",倾向是痰湿质"};img_con+="<img src=\"../中医体质辨识/img/痰湿质.png\" alt=\"\" width=\"100%\"/>";}
						if(tizhi_num_5>=9){jibenshi_num+=1;if(jibenshi_num>0){result_con+=",湿热质";}else{result_con+=",倾向是湿热质"};img_con+="<img src=\"../中医体质辨识/img/湿热质.png\" alt=\"\" width=\"100%\"/>";}
						if(tizhi_num_6>=9){jibenshi_num+=1;if(jibenshi_num>0){result_con+=",血瘀质";}else{result_con+=",倾向是血瘀质"};img_con+="<img src=\"../中医体质辨识/img/血瘀质.png\" alt=\"\" width=\"100%\"/>";}
						if(tizhi_num_7>=9){jibenshi_num+=1;if(jibenshi_num>0){result_con+=",气郁质";}else{result_con+=",倾向是气郁质"};img_con+="<img src=\"../中医体质辨识/img/气郁质.png\" alt=\"\" width=\"100%\"/>";}
						if(tizhi_num_8>=9){jibenshi_num+=1;if(jibenshi_num>0){result_con+=",特禀质。";}else{result_con+=",倾向是特禀质"};img_con+="<img src=\"../中医体质辨识/img/特禀质.png\" alt=\"\" width=\"100%\"/>";}
						$("#result_img").html(img_con);
					}else{
						var tizhi_is="";
						var tizhi_like="";
						if(tizhi_num_1>=11){tizhi_is+="气虚质";img_con+="<img src=\"../中医体质辨识/img/气虚质.png\" alt=\"\" width=\"100%\"/>";}
						if(tizhi_num_2>=11){if(tizhi_is==""){tizhi_is+="阳虚质"}else{tizhi_is+=",阳虚质"};img_con+="<img src=\"../中医体质辨识/img/阳虚质.png\" alt=\"\" width=\"100%\"/>";}
						if(tizhi_num_3>=11){if(tizhi_is==""){tizhi_is+="阴虚质"}else{tizhi_is+=",阴虚质"};img_con+="<img src=\"../中医体质辨识/img/阴虚质.png\" alt=\"\" width=\"100%\"/>";}
						if(tizhi_num_4>=11){if(tizhi_is==""){tizhi_is+="痰湿质"}else{tizhi_is+=",痰湿质"};img_con+="<img src=\"../中医体质辨识/img/痰湿质.png\" alt=\"\" width=\"100%\"/>";}
						if(tizhi_num_5>=11){if(tizhi_is==""){tizhi_is+="湿热质"}else{tizhi_is+=",湿热质"};img_con+="<img src=\"../中医体质辨识/img/湿热质.png\" alt=\"\" width=\"100%\"/>";}
						if(tizhi_num_6>=11){if(tizhi_is==""){tizhi_is+="血瘀质"}else{tizhi_is+=",血瘀质"};img_con+="<img src=\"../中医体质辨识/img/血瘀质.png\" alt=\"\" width=\"100%\"/>";}
						if(tizhi_num_7>=11){if(tizhi_is==""){tizhi_is+="气郁质"}else{tizhi_is+=",气郁质"};img_con+="<img src=\"../中医体质辨识/img/气郁质.png\" alt=\"\" width=\"100%\"/>";}
						if(tizhi_num_8>=11){if(tizhi_is==""){tizhi_is+="特禀质"}else{tizhi_is+=",特禀质"};img_con+="<img src=\"../中医体质辨识/img/特禀质.png\" alt=\"\" width=\"100%\"/>";}
						if(tizhi_is!=""){
							result_con+="\r&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;您的体质是"+tizhi_is;
						}
						
						
						if(tizhi_num_1>=9&&tizhi_num_1<=10){tizhi_like+="气虚质";img_con+="<img src=\"../中医体质辨识/img/气虚质.png\" alt=\"\" width=\"100%\"/>";}
						if(tizhi_num_2>=9&&tizhi_num_2<=10){if(tizhi_like==""){tizhi_is+="阳虚质"}else{tizhi_like+=",阳虚质"};img_con+="<img src=\"../中医体质辨识/img/阳虚质.png\" alt=\"\" width=\"100%\"/>";}
						if(tizhi_num_3>=9&&tizhi_num_3<=10){if(tizhi_like==""){tizhi_is+="阴虚质"}else{tizhi_like+=",阴虚质"};img_con+="<img src=\"../中医体质辨识/img/阴虚质.png\" alt=\"\" width=\"100%\"/>";}
						if(tizhi_num_4>=9&&tizhi_num_4<=10){if(tizhi_like==""){tizhi_is+="痰湿质"}else{tizhi_like+=",痰湿质"};img_con+="<img src=\"../中医体质辨识/img/痰湿质.png\" alt=\"\" width=\"100%\"/>";}
						if(tizhi_num_5>=9&&tizhi_num_5<=10){if(tizhi_like==""){tizhi_is+="湿热质"}else{tizhi_like+=",湿热质"};img_con+="<img src=\"../中医体质辨识/img/湿热质.png\" alt=\"\" width=\"100%\"/>";}
						if(tizhi_num_6>=9&&tizhi_num_6<=10){if(tizhi_like==""){tizhi_is+="血瘀质"}else{tizhi_like+=",血瘀质"};img_con+="<img src=\"../中医体质辨识/img/血瘀质.png\" alt=\"\" width=\"100%\"/>";}
						if(tizhi_num_7>=9&&tizhi_num_7<=10){if(tizhi_like==""){tizhi_is+="气郁质"}else{tizhi_like+=",气郁质"};img_con+="<img src=\"../中医体质辨识/img/气郁质.png\" alt=\"\" width=\"100%\"/>";}
						if(tizhi_num_8>=9&&tizhi_num_8<=10){if(tizhi_like==""){tizhi_is+="特禀质"}else{tizhi_like+=",特禀质"};img_con+="<img src=\"../中医体质辨识/img/特禀质.png\" alt=\"\" width=\"100%\"/>";}
						if(tizhi_is!=""&&tizhi_like!=""){
							result_con+=",倾向是"+tizhi_like+"。";
						}else if(tizhi_is!=""&&tizhi_like==""){
							result_con+="。";
						}else if(tizhi_is==""&&tizhi_like!=""){
							result_con+="\r&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;您的体质倾向是"+tizhi_like+"。";
						}
						$("#result_img").html(img_con);
						
					}
					result_con+="————可参考以下对应体质方案（长按图片保存方便查看）";
					$("#result_title").html(result_con);
					$("#result").show();
					$("#reflash").show();
				}
				
			}
			
			//消息框
			// document.getElementById("toastBtn").addEventListener('tap', function() {
			// 	mui.toast('欢迎体验Hello MUI');
			// });
			
		    </script>  
	
	</body>
</html>

<!DOCTYPE html>
